(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.WavEncoder=e()}})(function(){var e,t,n;return function r(e,t,n){function i(f,s){if(!t[f]){if(!e[f]){var a=typeof require=="function"&&require;if(!s&&a)return a(f,!0);if(o)return o(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[f]={exports:{}};e[f][0].call(c.exports,function(t){var n=e[f][1][t];return i(n?n:t)},c,c.exports,r,e,t,n)}return t[f].exports}var o=typeof require=="function"&&require;for(var f=0;f<n.length;f++)i(n[f]);return i}({1:[function(e,t,n){"use strict";var self={};function r(){self.onmessage=function(e){switch(e.data.type){case"encode":self.encode(e.data.audioData).then(function(e){self.postMessage({type:"encoded",buffer:e},[e])})["catch"](function(e){self.postMessage({type:"error",message:e.message})});break}};self.encode=function(t){return new Promise(function(n){var r=t.numberOfChannels;var i=t.sampleRate;var o=t.length*r*2;var f=new e(44+o);f.writeString("RIFF");f.writeUint32(f.length-8);f.writeString("WAVE");f.writeString("fmt ");f.writeUint32(16);f.writeUint16(1);f.writeUint16(r);f.writeUint32(i);f.writeUint32(i*r*2);f.writeUint16(r*2);f.writeUint16(16);f.writeString("data");f.writeUint32(o);var s=t.buffers.map(function(e){return new Float32Array(e)});f.writePCM(s);n(f.toArrayBuffer())})};function e(e){this.buffer=new ArrayBuffer(e);this.view=new DataView(this.buffer);this.length=e;this.pos=0}e.prototype.writeUint8=function(e){this.view.setUint8(this.pos,e);this.pos+=1};e.prototype.writeUint16=function(e){this.view.setUint16(this.pos,e,true);this.pos+=2};e.prototype.writeUint32=function(e){this.view.setUint32(this.pos,e,true);this.pos+=4};e.prototype.writeString=function(e){for(var t=0;t<e.length;t++){this.writeUint8(e.charCodeAt(t))}};e.prototype.writePCM=function(e){var t=e[0].length;var n=e.length;for(var r=0;r<t;r++){for(var i=0;i<n;i++){var o=e[i][r];o=Math.max(-32768,Math.min(o*32768,32767))|0;this.view.setUint16(this.pos,o,true);this.pos+=2}}};e.prototype.toArrayBuffer=function(){return this.buffer};self.BufferWriter=e}r.self=r.util=self;t.exports=r},{}],2:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e["default"]:e};var i=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=true;if(r.value)r.writable=true}Object.defineProperties(e,t)}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};"use stirct";var f=r(e("inline-worker"));var s=r(e("./encoder-worker"));var a=function(){function e(){o(this,e)}i(e,{encode:{value:function t(e){return new Promise(function(t){var n=new f(s,s.self);n.onmessage=function(e){if(e.data.type==="encoded"){t(e.data.buffer)}};var r=e.toTransferable();n.postMessage({type:"encode",audioData:r},r.buffers)})}}},{canProcess:{value:function n(e){if(typeof e==="string"){return/\bwav$/.test(e)}return false}}});return e}();t.exports=a},{"./encoder-worker":1,"inline-worker":4}],3:[function(e,t,n){"use strict";t.exports=e("./encoder")},{"./encoder":2}],4:[function(e,t,n){"use strict";t.exports=e("./inline-worker")},{"./inline-worker":5}],5:[function(e,t,n){(function(e){"use strict";var n=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=true;if(r.value)r.writable=true}Object.defineProperties(e,t)}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var r=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var i=!!(e===e.window&&e.URL&&e.Blob&&e.Worker);var o=function(){function t(n,self){var o=this;r(this,t);if(i){var f=n.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1];var s=e.URL.createObjectURL(new e.Blob([f],{type:"text/javascript"}));return new e.Worker(s)}this.self=self;this.self.postMessage=function(e){setTimeout(function(){o.onmessage({data:e})},0)};setTimeout(function(){n.call(self)},0)}n(t,{postMessage:{value:function o(e){var t=this;setTimeout(function(){t.self.onmessage({data:e})},0)}}});return t}();t.exports=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[3])(3)});